---
title: "Using python for postrgressql uploads"
author: "James P. Gilbert"
date: "`r Sys.Date()`"
output:
  pdf_document:
    toc: yes
  html_document:
    number_sections: yes
    toc: yes
vignette: >
  %\VignetteIndexEntry{Creating Migrations}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
---

# Introduction
Note, this feature should be considered experimental until further notice.

The use of DatabaseConnector with postgresql without bulk uploads functionality will often be slow and require the installation and configuration of postgresql binaries on the system.
This may be challenging or restrictred in many environments.
Similarly, this method requires writing a data.frame to disk which will be prohibitively slow if data is already in a
csv format.

As a consequence, this package supports bulk uploading through python with a small amount of configuration.
This uses no r-memory; csv files are transfered directly through python and will be considerably faster

This process uses the `psycopg2` python library, which can be installed via compilation or in binary form.
This process demonstrates usage with the `psycopg2-binary` package.

# Installing psycopg2

## Using a virtualenv
Result model manager provides an interactive function for enabling the python library. If psycopg2 this function will
do nothing.
However, if there is no available binary (and the `reticulate` package is not installed) you will be asked to install
these packages.
Do do this run the following:
```{r eval = F}
ResultModelManager::enablePythonUploads()
```
Alternatively you can specify this manually

```{r eval = F}
ResultModelManager::install_psycopg2()
```

## Using conda or system python installs

Please consult the [reticulate documentation](https://rstudio.github.io/reticulate/articles/python_packages.html) on how to install the `psycopg2-binary` package.